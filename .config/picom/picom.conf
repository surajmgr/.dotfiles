#  ██████╗ ██╗ ██████╗ ██████╗ ███╗   ███╗
#  ██╔══██╗██║██╔════╝██╔═══██╗████╗ ████║	Black Professional Theme
#  ██████╔╝██║██║     ██║   ██║██╔████╔██║	Migrated to gh0stzk style
#  ██╔═══╝ ██║██║     ██║   ██║██║╚██╔╝██║	Professional dark theme with floating window rounding
#  ██║     ██║╚██████╗╚██████╔╝██║ ╚═╝ ██║
#  ╚═╝     ╚═╝ ╚═════╝ ╚═════╝ ╚═╝     ╚═╝

## ----- Shadows ----- ##
shadow = true;
shadow-radius = 12;
shadow-opacity = 0.35;
shadow-offset-x = 5;
shadow-offset-y = 5;
shadow-color = "#000000"

## ----- Fading ----- ##
fading = true;
fade-in-step = 0.04;
fade-out-step = 0.04;
fade-delta = 8;
no-fading-openclose = false;
no-fading-destroyed-argb = false;

## ----- Transparency ----- ##
frame-opacity = 0.8;
inactive-opacity = 0.95;
active-opacity = 1.0;
inactive-dim = 0.1;
inactive-opacity-override = false;
menu-opacity = 0.9;

## ----- Corners ----- ##
corner-radius = 20;

#################################
#       General Settings        #
#################################
# Available backends "xrender" "glx" "egl"
backend = "glx";
dithered-present = false;
vsync = true;
experimental-backends = true;
refresh-rate = 0;
detect-rounded-corners = true;
detect-client-opacity = true;
detect-transient = true;
detect-client-leader = true;
use-damage = true;
unredir-if-possible = true;
unredir-if-possible-delay = 0;
mark-wmwin-focused = true;
mark-ovredir-focused = true;
glx-no-rebind-pixmap = true;
glx-no-stencil = false;
glx-copy-from-front = false;
log-level = "warn";
show-all-xerrors = false;

#################################
#             Rules             #
#################################
blur:
{
	method = "dual_kawase";
	strength = 6;
	deviation = 1.0;
	kernel = "11x11gaussian";
	background = false;
	background-frame = false;
	background-fixed = false;
}

rules: (
	{
		# Default rule - apply base settings
		blur-background = true;
		fade = true;
		shadow = true;
	},
	{
		# CRITICAL: Only floating windows get rounded corners (i3/bspwm floating)
		match = "I3_FLOATING_WINDOW@:c = 1";
		corner-radius = 20;
	},
	{
		# All non-floating windows get NO rounded corners
		match = "!(I3_FLOATING_WINDOW@:c = 1)";
		corner-radius = 0;
	},
	{
		# Normal windows
		match = "window_type = 'normal'";
		fade = true;
		shadow = true;
	},
	{
		# Dialog windows
		match = "window_type = 'dialog'";
		shadow = true;
	},
	{
		# Tooltips - special handling
		match = "window_type = 'tooltip'";
		corner-radius = 0;
		opacity = 0.85;
		shadow = false;
		fade = true;
		focus = true;
		full-shadow = false;
	},
	{
		# Fullscreen windows - no rounded corners
		match = "fullscreen";
		corner-radius = 0;
	},
	{
		# Dock windows (taskbars, panels) - no corners, no shadows
		match = "window_type = 'dock'";
		corner-radius = 0;
		shadow = false;
		clip-shadow-above = true;
	},
	{
		# Desktop windows
		match = "window_type = 'desktop'";
		shadow = false;
		blur-background = false;
	},
	{
		# Dropdown and popup menus
		match = "window_type = 'dropdown_menu' || window_type = 'popup_menu'";
		corner-radius = 0;
		opacity = 0.9;
		shadow = true;
		fade = true;
	},
	{
		# Regular menus
		match = "window_type = 'menu'";
		corner-radius = 0;
		focus = false;
		opacity = 0.9;
		shadow = true;
	},
	{
		# Notifications
		match = "window_type = 'notification'";
		shadow = false;
		fade = true;
	},
	{
		# Splash screens
		match = "window_type = 'splash'";
		shadow = false;
	},
	{
		# Utility windows
		match = "window_type = 'utility'";
		focus = false;
		shadow = false;
		blur-background = false;
	},
	{
		# DnD windows
		match = "window_type = 'dnd'";
		shadow = false;
	},
	{
		# Terminal applications - CORRECT transparency (95% = 0.95)
		match = "class_g = 'Alacritty'";
		opacity = 0.95;
	},
	{
		match = "class_g = 'kitty'";
		opacity = 0.95;
	},
	{
		match = "class_g = 'URxvt'";
		opacity = 0.90;
	},
	{
		match = "class_g = 'XTerm'";
		opacity = 0.90;
	},
	{
		# Status bars - semi-transparent
		match = "class_g = 'Polybar'";
		corner-radius = 0;
		opacity = 0.90;
	},
	{
		match = "class_g = 'i3bar'";
		corner-radius = 0;
		opacity = 0.85;
	},
	{
		# Browsers - optimized for readability
		match = "class_g = 'firefox'";
		opacity = 0.90;
	},
	{
		match = "class_g = 'chromium'";
		opacity = 1.0;
	},
	{
		match = "class_g = 'Google-chrome'";
		opacity = 1.0;
	},
	{
		# Development tools - mostly opaque
		match = "class_g = 'code-oss'";
		opacity = 0.98;
	},
	{
		match = "class_g = 'Code'";
		opacity = 0.98;
	},
	{
		match = "class_g = 'jetbrains-idea'";
		opacity = 0.95;
	},
	{
		match = "class_g = 'jetbrains-pycharm'";
		opacity = 0.95;
	},
	{
		# Media applications - fully opaque
		match = "class_g = 'mpv'";
		opacity = 1.0;
	},
	{
		match = "class_g = 'vlc'";
		opacity = 1.0;
	},
	{
		# Communication apps
		match = "class_g = 'discord'";
		opacity = 0.95;
	},
	{
		match = "class_g = 'TelegramDesktop'";
		opacity = 0.95;
	},
	{
		match = "class_g = 'Slack'";
		opacity = 0.95;
	},
	{
		# File managers - fully opaque
		match = "class_g = 'Thunar'";
		opacity = 1.0;
	},
	{
		match = "class_g = 'nautilus'";
		opacity = 1.0;
	},
	{
		match = "class_g = 'Pcmanfm'";
		opacity = 1.0;
	},
	{
		# App launcher rofi
		match = "class_g = 'rofi'";
		corner-radius = 0;
		opacity = 0.90;
	},
	{
		# Screenshot selection tool
		match = "class_g = 'slop'";
		opacity = 1.0;
		fade = false;
	},
	{
		# Notification daemon
		match = "class_g = 'Dunst'";
		corner-radius = 0;
		opacity = 0.95;
	},
	{
		# Windows that should NOT have rounded corners
		match = "class_g = 'Polybar' || "
				"class_g = 'dwm' || "
				"class_g = 'i3bar' || "
				"class_g = 'rofi' || "
				"window_type = 'dock' || "
				"window_type = 'desktop' || "
        "class_g = 'sidepanel-firefox'";
		corner-radius = 0;
	},
	{
		# Windows excluded from round borders
		match = "class_g = 'Polybar' || window_type = 'dock'";
		round-borders = 0;
	},
	{
		# Shadow exclusions
		match = "class_g = 'Polybar' || "
				"class_g = 'i3bar' || "
				"class_g = 'rofi' || "
				"class_g = 'Dunst' || "
				"window_type = 'dock' || "
				"window_type = 'desktop' || "
				"window_type = 'notification' || "
				"_GTK_FRAME_EXTENTS@ || "
				"_NET_WM_STATE@:32a *= '_NET_WM_STATE_HIDDEN'";
		shadow = false;
	},
	{
		# Fade exclusions
		match = "class_g = 'slop' || class_g = 'rofi'";
		fade = false;
	},
	{
		# Focus exclusions - windows that shouldn't be dimmed
		match = "class_g = 'Cairo-clock' || "
				"class_g = 'Bar' || "
				"class_g = 'slop' || "
				"class_g = 'rofi' || "
				"class_g = 'Xfce4-screenshooter'";
		inactive-dim = 0.0;
	},
	{
		# Blur exclusions
		match = "window_type = 'dock' || "
				"window_type = 'desktop' || "
				"class_g = 'slop' || "
				"(class_g = 'Firefox' && argb) || "
				"_GTK_FRAME_EXTENTS@ || "
				"class_g = 'Xfce4-screenshooter'";
		blur-background = false;
	},
	# Uncomment the line below to include animations
	@include "picom-animations.conf"
)
